commit 1bebaa5e8d67f3c2e3dca9573e35e0bdf49e9941
Author: Benjamin Chr√©tien <chretien@lirmm.fr>
Date:   Sat Mar 8 15:56:00 2014 +0100

    Fix cblas on Linux.

diff --git a/Makefile.openhrp3 b/Makefile.openhrp3
index 23ebbaa..d58d1e0 100644
--- a/Makefile.openhrp3
+++ b/Makefile.openhrp3
@@ -4,7 +4,7 @@ SVN_DIR     = build/OpenHRP-3.1
 #SVN_URL     = https://openrtp.org/svn/hrg/openhrp/3.1/trunk # for developers only
 SVN_URL     = https://openrtp.org/svn/hrg/openhrp/3.1/tags/3.1.5/
 #SVN_REVISION = -r@REVISION@
-SVN_PATCH = ${PATCH_DIR}/patch/OpenHRP2ModelFile.patch ${PATCH_DIR}/patch/FixInertiaColladaModelLoader.patch ${PATCH_DIR}/patch/FixColladaModelLoaderSegmentNames.patch ${PATCH_DIR}/patch/CompileColladaModel.patch ${PATCH_DIR}/patch/CompileIdlPy.patch ${PATCH_DIR}/patch/Boost.patch#
+SVN_PATCH = ${PATCH_DIR}/patch/OpenHRP2ModelFile.patch ${PATCH_DIR}/patch/FixInertiaColladaModelLoader.patch ${PATCH_DIR}/patch/FixColladaModelLoaderSegmentNames.patch ${PATCH_DIR}/patch/CompileColladaModel.patch ${PATCH_DIR}/patch/CompileIdlPy.patch ${PATCH_DIR}/patch/Boost.patch ${PATCH_DIR}/patch/cblas.patch#
 SVN_CMDLINE = svn --non-interactive --trust-server-cert
 MK_DIR      = $(shell rospack find mk)
 NUM_OF_CPUS = $(shell grep -c '^processor' /proc/cpuinfo)
diff --git a/patch/cblas.patch b/patch/cblas.patch
new file mode 100644
index 0000000..5f8400f
--- /dev/null
+++ b/patch/cblas.patch
@@ -0,0 +1,18 @@
+Index: server/UtDynamicsSimulator/sDIMS/dims_clapack.cpp
+===================================================================
+--- server/UtDynamicsSimulator/sDIMS/dims_clapack.cpp
++++ server/UtDynamicsSimulator/sDIMS/dims_clapack.cpp
+@@ -29,11 +29,11 @@
+ #undef USE_CLAPACK_INTERFACE
+ #include <blaswrap.h>
+ #else
+-#ifdef __darwin__
++#if defined(__darwin__) || defined(__linux__)
+ extern "C"{
+ #endif
+ #include <cblas.h>
+-#ifdef __darwin__
++#if defined(__darwin__) || defined(__linux__)
+ }
+ #endif
+ #endif
